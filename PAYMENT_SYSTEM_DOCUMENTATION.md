# ๐ **ูุธุงู ุฅุฏุงุฑุฉ ุงูุฏูุน ูุงูุงุดุชุฑุงูุงุช - ุงูุชูุซูู ุงูุดุงูู**

**ุงูุชุงุฑูุฎ:** 2024-11-09  
**ุงููุณุฎุฉ:** 1.0  
**ุงูุญุงูุฉ:** โ ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู

---

## ๐ฏ **ูุธุฑุฉ ุนุงูุฉ**

ุชู ุจูุงุก ูุธุงู ูุชูุงูู ูุฅุฏุงุฑุฉ ุนูููุงุช ุงูุฏูุน ูุงูุงุดุชุฑุงูุงุช ูู ุงูููุตุฉ ุงูุชุนููููุฉุ ูุดูู:

1. **ููุทูุงุจ:**
   - ุฅุฑุณุงู ุทูุจุงุช ุงูุฏูุน ุนุจุฑ ููุฏุงููู ูุงุด
   - ูุชุงุจุนุฉ ุญุงูุฉ ุงูุทูุจุงุช ูู ุงูููุช ุงููุนูู
   - ุชูุนูู ุชููุงุฆู ููุงุดุชุฑุงู ุนูุฏ ุงูููุงููุฉ

2. **ููุฃุฏูู:**
   - ููุญุฉ ุชุญูู ุดุงููุฉ ูุฅุฏุงุฑุฉ ุงูุทูุจุงุช
   - ูุจูู/ุฑูุถ ุงูุทูุจุงุช ูุน ุงูููุงุญุธุงุช
   - ุฅุญุตุงุฆูุงุช ููุตูุฉ ููุฅูุฑุงุฏุงุช

3. **ุงููููุฒุงุช:**
   - ุชุญุฏูุซ ุชููุงุฆู ูู 10-15 ุซุงููุฉ
   - ุฅุดุนุงุฑุงุช ููุฑูุฉ ุนูุฏ ุชุบููุฑ ุงูุญุงูุฉ
   - ุฑุจุท ูุน WhatsApp ููุชูุงุตู ุงูุณุฑูุน

---

## ๐๏ธ **ุงููููุงุช ุงููููุดุฃุฉ**

### **1. ูุงุนุฏุฉ ุงูุจูุงูุงุช**
```sql
payment_requests_table.sql
```
- ุฌุฏุงูู: `payment_requests`, `course_enrollments`, `admin_notifications`
- ููุงุฑุณ ูุณูุงุณุงุช ุฃูุงู (RLS)
- Triggers ููุชุญุฏูุซ ุงูุชููุงุฆู

### **2. API Routes**
```typescript
/api/payment-request/route.ts
```
- **POST:** ุฅูุดุงุก ุทูุจ ุฏูุน ุฌุฏูุฏ
- **GET:** ุฌูุจ ุงูุทูุจุงุช (ูุน ููุชุฑุฉ)
- **PATCH:** ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ

### **3. ูุงุฌูุงุช ุงููุณุชุฎุฏู**

#### **ุฃ. ููุญุฉ ุชุญูู ุงูุฃุฏูู**
```typescript
/admin/payment-requests/page.tsx
```
- ุนุฑุถ ุฌููุน ุงูุทูุจุงุช
- ููุชุฑุฉ ูุจุญุซ ูุชูุฏู
- ุฅุญุตุงุฆูุงุช ุงูุฅูุฑุงุฏุงุช
- ูุจูู/ุฑูุถ ูุน ุงูููุงุญุธุงุช

#### **ุจ. ุตูุญุฉ ุญุงูุฉ ุงูุฏูุน ููุทุงูุจ**
```typescript
/student/payment-status/page.tsx
```
- ุนุฑุถ ุญุงูุฉ ุงูุทูุจุงุช
- ุชุญุฏูุซ ุชููุงุฆู ูู 10 ุซูุงูู
- ุฅุดุนุงุฑุงุช ุนูุฏ ุงูุชุบููุฑ
- ุฃุฒุฑุงุฑ ูููุตูู ุงูุณุฑูุน ููููุฑุณ

#### **ุฌ. ุชุญุฏูุซ ูููู ุงูููุฏูู ุงููุญูู**
```typescript
/components/ProtectedVideoPlayer.tsx
```
- ุฅุฑุณุงู ุงูุทูุจ ููุงุนุฏุฉ ุงูุจูุงูุงุช
- ุญูุธ ูุนุฑู ุงูุทูุจ
- ุฑุจุท ูุน WhatsApp

---

## ๐ **ุณูุฑ ุงูุนูู (Workflow)**

```mermaid
graph TD
    A[ุงูุทุงูุจ ูุถุบุท ุงุดุชุฑู ุงูุขู] --> B[ูููุฃ ุงูุจูุงูุงุช]
    B --> C[ูุฏูุน ุนุจุฑ ููุฏุงููู ูุงุด]
    C --> D[ูุถุบุท ุฃุฑุณู ูููุงุชุณุงุจ]
    D --> E[ููุญูุธ ุงูุทูุจ ูู DB]
    D --> F[ููุฑุณู ุฑุณุงูุฉ WhatsApp]
    E --> G[ูุธูุฑ ููุฃุฏูู ูู ุงูููุญุฉ]
    G --> H{ูุฑุงุฑ ุงูุฃุฏูู}
    H -->|ูุจูู| I[ุชูุนูู ุงูุงุดุชุฑุงู]
    H -->|ุฑูุถ| J[ุฅุฑุณุงู ุณุจุจ ุงูุฑูุถ]
    I --> K[ุงูุทุงูุจ ูุตู ููููุฑุณ]
    J --> L[ุงูุทุงูุจ ูุฑู ุงูุณุจุจ]
```

---

## ๐พ **ุงูุจูุงูุงุช ุงููุญููุธุฉ**

### **ุฌุฏูู payment_requests:**
```json
{
  "id": "UUID",
  "student_name": "ุงุณู ุงูุทุงูุจ",
  "student_phone": "01012345678",
  "course_id": "ูุนุฑู ุงูููุฑุณ",
  "course_name": "ุงุณู ุงูููุฑุณ",
  "course_price": 299,
  "teacher_name": "ุงุณู ุงููุฏุฑุณ",
  "status": "pending | approved | rejected",
  "admin_notes": "ููุงุญุธุงุช ุงูุฃุฏูู",
  "created_at": "2024-11-09T10:00:00Z"
}
```

### **ุฌุฏูู course_enrollments:**
```json
{
  "id": "UUID",
  "student_id": "ูุนุฑู ุงูุทุงูุจ",
  "course_id": "ูุนุฑู ุงูููุฑุณ",
  "payment_request_id": "ูุนุฑู ุงูุทูุจ",
  "is_active": true,
  "access_type": "full",
  "enrolled_at": "2024-11-09T10:30:00Z"
}
```

---

## ๐งช **ุทุฑููุฉ ุงูุงุฎุชุจุงุฑ**

### **1. ุชุทุจูู ุงูุฌุฏุงูู ูู Supabase:**
```bash
# ูู Supabase SQL Editor
# ุงูุณุฎ ูุญุชูู: payment_requests_table.sql
# ููุฐู
```

### **2. ุงุฎุชุจุงุฑ ูุทุงูุจ:**
1. ุงูุชุญ ุฃู ุตูุญุฉ ููุฑุณ
2. ุงุถุบุท "ุงุดุชุฑู ุงูุขู"
3. ุงููุฃ ุงูุจูุงูุงุช
4. ุงุถุบุท "ุฃุฑุณู ูููุงุชุณุงุจ"
5. ุงูุชูู ุฅูู `/student/payment-status`
6. ุดุงูุฏ ุญุงูุฉ ุงูุทูุจ

### **3. ุงุฎุชุจุงุฑ ูุฃุฏูู:**
1. ุงูุชุญ `/admin/payment-requests`
2. ุดุงูุฏ ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ
3. ุงุถุบุท ุนูู ุนุฑุถ ุงูุชูุงุตูู
4. ุงูุจู ุฃู ุงุฑูุถ ุงูุทูุจ
5. ุดุงูุฏ ุงูุชุญุฏูุซ ุงูููุฑู ููุทุงูุจ

---

## ๐ **ุงูุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ**

| ุงูููุงู | ุงูุชูุฑุงุฑ | ุงูุบุฑุถ |
|--------|---------|-------|
| ุตูุญุฉ ุงูุทุงูุจ | ูู 10 ุซูุงูู | ุงูุชุญูู ูู ุญุงูุฉ ุงูุทูุจ |
| ุตูุญุฉ ุงูููุฑุณ | ูู 15 ุซุงููุฉ | ุงูุชุญูู ูู ุงูุงุดุชุฑุงู |
| ููุญุฉ ุงูุฃุฏูู | ูู 30 ุซุงููุฉ | ุชุญุฏูุซ ูุงุฆูุฉ ุงูุทูุจุงุช |

---

## ๐จ **ูุงุฌูุงุช ุงููุณุชุฎุฏู**

### **ููุญุฉ ุชุญูู ุงูุฃุฏูู:**
- **ุงูุฅุญุตุงุฆูุงุช:** ุนุฏุฏ ุงูุทูุจุงุชุ ุงูุฅูุฑุงุฏุงุชุ ุงููุนููุฉ
- **ุงูุฌุฏูู:** ุจูุงูุงุช ููุตูุฉ ููู ุทูุจ
- **ุงูููุงุชุฑ:** ุญุณุจ ุงูุญุงูุฉุ ุงูุชุงุฑูุฎุ ุงูุทุงูุจ
- **ุงูุฅุฌุฑุงุกุงุช:** ูุจููุ ุฑูุถุ ุนุฑุถ ุงูุชูุงุตูู

### **ุตูุญุฉ ุงูุทุงูุจ:**
- **ุญุงูุฉ ุงูุทูุจ:** ูุนููุ ููุจููุ ูุฑููุถ
- **ุงูุชูุงุตูู:** ุงูููุฑุณุ ุงูุณุนุฑุ ุงูุชุงุฑูุฎ
- **ุงูููุงุญุธุงุช:** ูู ุงูุฃุฏูู
- **ุงูุฃุฒุฑุงุฑ:** ุงูุฐูุงุจ ููููุฑุณ (ุนูุฏ ุงููุจูู)

---

## ๐ฑ **ุฑุณุงูุฉ WhatsApp ุงูููุฑุณูุฉ**

```
*ุทูุจ ุงุดุชุฑุงู ูู ููุฑุณ*

๐ *ุงูุงุณู:* ุฃุญูุฏ ูุญูุฏ
๐ฑ *ุฑูู ุงููุงุชู:* 01012345678
๐ *ุงุณู ุงูููุฑุณ:* ุฏูุฑุฉ ุงูุฑูุงุถูุงุช
๐ฐ *ุงููุจูุบ:* 299 ุฌููู ูุตุฑู
๐ *ููุฏ ุงูููุฑุณ:* abc-123
๐ *ุฑูู ุงูุทูุจ:* req-456

โ ุชู ุงูุชุญููู ุนุจุฑ ููุฏุงููู ูุงุด
๐ฒ ุงูุฑูู ุงููุญูู ููู: 01012345678

โฐ ุงูุชุงุฑูุฎ ูุงูููุช: 09/11/2024, 08:30:00 ู

*ุจุฑุฌุงุก ุชูุนูู ุงูุงุดุชุฑุงู*
```

---

## ๐ **ุงูุฃูุงู**

1. **RLS Policies:**
   - ุงูุทูุงุจ ูุฑูู ุทูุจุงุชูู ููุท
   - ุงูุฃุฏูู ูุฑู ููุฏูุฑ ูู ุงูุทูุจุงุช

2. **ุงูุชุญูู:**
   - ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูุจู ุงูุญูุธ
   - ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูุจู ุงูุชุญุฏูุซ

3. **ุงูุญูุงูุฉ:**
   - ูุนุฑูุงุช UUID ุนุดูุงุฆูุฉ
   - ุชุดููุฑ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
   - ุณุฌูุงุช ููู ุนูููุฉ

---

## ๐ **ุงูุฎุทูุงุช ุงููุงุฏูุฉ (ุงุฎุชูุงุฑู)**

1. **ุฅุดุนุงุฑุงุช SMS/Email:**
   - ุนูุฏ ูุจูู/ุฑูุถ ุงูุทูุจ
   - ุชุฐููุฑ ุจุงูุทูุจุงุช ุงููุนููุฉ

2. **ุทุฑู ุฏูุน ุฅุถุงููุฉ:**
   - ุจุทุงูุงุช ุงูุงุฆุชูุงู
   - InstaPay
   - PayPal

3. **ุชูุงุฑูุฑ ูุชูุฏูุฉ:**
   - ุชูุงุฑูุฑ ุดูุฑูุฉ ููุฅูุฑุงุฏุงุช
   - ุฅุญุตุงุฆูุงุช ุงููุฏุฑุณูู
   - ูุนุฏูุงุช ุงูุชุญููู

4. **ุงูุชูุงูู ูุน CRM:**
   - ุฑุจุท ูุน ูุธุงู ุฅุฏุงุฑุฉ ุงูุนููุงุก
   - ุชุชุจุน ุฑุญูุฉ ุงูุทุงูุจ

---

## โ **ุงูุฎูุงุตุฉ**

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุจุงููุงูู ููุดูู:**

โ **ุญูุธ ุงูุทูุจุงุช** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช  
โ **ููุญุฉ ุชุญูู ููุฃุฏูู** ูุฅุฏุงุฑุฉ ุงูุทูุจุงุช  
โ **ุตูุญุฉ ููุทุงูุจ** ููุชุงุจุนุฉ ุงูุญุงูุฉ  
โ **ุชูุนูู ุชููุงุฆู** ุนูุฏ ุงูููุงููุฉ  
โ **ุชุญุฏูุซุงุช ููุฑูุฉ** ุจุฏูู ุชุญุฏูุซ ุงูุตูุญุฉ  
โ **ุฑุจุท ูุน WhatsApp** ููุชูุงุตู  

---

**ุชู ุงูุงูุชูุงุก ูู ุจูุงุก ุงููุธุงู ุจูุฌุงุญ! ๐**

ููุฏุนู ุงูููู: admin@platform.com  
ูููุณุงุนุฏุฉ: 201012345678 (WhatsApp)
