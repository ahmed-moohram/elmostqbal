# ๐ **ุชูุฑูุฑ ุฑุจุท ุงูุตูุญุงุช ุจูุงุนุฏุฉ ุงูุจูุงูุงุช Supabase**

**ุงูุชุงุฑูุฎ:** 2024-11-09  
**ูุงุนุฏุฉ ุงูุจูุงูุงุช:** Supabase  
**URL:** https://wnqifmvgvlmxgswhcwnc.supabase.co

---

## โ **ุงูุตูุญุงุช ุงููุฑุจูุทุฉ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช**

### 1๏ธโฃ **ุตูุญุฉ ุงูุชุณุฌูู** `/register`
- **ุงูููู:** `src/app/register/page.tsx`
- **ุงููุธุงุฆู:**
  - โ ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ ูู ุฌุฏูู `users`
  - โ ุญูุธ ุงูุจูุงูุงุช ุงููุงููุฉ (ุงูุงุณูุ ุงููุงุชูุ ุงููุฏุฑุณุฉุ ุงูุตูุ ุฅูุฎ)
  - โ ุชุดููุฑ ูููุฉ ุงููุฑูุฑ ุจู bcrypt
  - โ ุชูุฌูู ุชููุงุฆู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ ุจุนุฏ ุงูุชุณุฌูู
  - โ ุญูุธ ุงูุจูุงูุงุช ูู localStorage
  
### 2๏ธโฃ **ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู** `/login`
- **ุงูููู:** `src/app/login/page.tsx`
- **ุงููุธุงุฆู:**
  - โ ุงูุชุญูู ูู ุจูุงูุงุช ุงููุณุชุฎุฏู ูู `users`
  - โ ุฅูุดุงุก ุฌูุณุฉ ุนูู
  - โ ุญูุธ ุงูุชููู

### 3๏ธโฃ **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ** `/`
- **ุงูููู:** `src/app/page.tsx`
- **ุงููุธุงุฆู:**
  - โ ุฌูุจ ุงูููุฑุณุงุช ุงููููุฒุฉ ูู ุฌุฏูู `courses`
  - โ ุนุฑุถ ุฑุณุงูุฉ ุชุฑุญูุจ ูููุณุชุฎุฏู ุงูุฌุฏูุฏ
  - โ ุนุฑุถ ุจูุงูุงุช ุงููุณุชุฎุฏู (ุงูุงุณูุ ุงูุตูุ ุงููุฏููุฉ)
  - โ ููุก ุงูุจูุงูุงุช ุชููุงุฆูุงู ูู localStorage

### 4๏ธโฃ **ุตูุญุฉ ุงูููุฑุณุงุช** `/courses`
- **ุงูููู:** `src/app/courses/page.tsx`
- **ุงููุธุงุฆู:**
  - โ ุฌูุจ ุฌููุน ุงูููุฑุณุงุช ูู `courses`
  - โ ููุชุฑุฉ ุญุณุจ ุงููุฑุญูุฉ ูุงููุงุฏุฉ
  - โ ุนุฑุถ ูุนูููุงุช ุงููุฏุฑุณ

### 5๏ธโฃ **ุตูุญุฉ ุงูููุฑุณ** `/courses/[id]`
- **ุงูููู:** `src/app/courses/[id]/page.tsx`
- **ุงููุธุงุฆู:**
  - โ ุฌูุจ ุชูุงุตูู ุงูููุฑุณ ูู `courses`
  - โ ุฌูุจ ุงูุฏุฑูุณ ูู `lessons`
  - โ ุงูุชุญูู ูู ุงูุงุดุชุฑุงู ูู `enrollments` ู `payment_requests`
  - โ ุชุญุฏูุซ ุฏูุฑู ูู 15 ุซุงููุฉ

### 6๏ธโฃ **ููุญุฉ ุงูุฃุฏูู** `/admin/payment-requests`
- **ุงูููู:** `src/app/admin/payment-requests/page.tsx`
- **ุงููุธุงุฆู:**
  - โ ุฌูุจ ุทูุจุงุช ุงูุฏูุน ูู `payment_requests`
  - โ ูุจูู/ุฑูุถ ุงูุทูุจุงุช
  - โ ุชูุนูู ุงูุงุดุชุฑุงูุงุช ูู `course_enrollments`
  - โ ุฅุญุตุงุฆูุงุช ุงูุฅูุฑุงุฏุงุช

### 7๏ธโฃ **ุตูุญุฉ ุงูุทุงูุจ** `/student/payment-status`
- **ุงูููู:** `src/app/student/payment-status/page.tsx`
- **ุงููุธุงุฆู:**
  - โ ูุชุงุจุนุฉ ุญุงูุฉ ุทูุจุงุช ุงูุฏูุน
  - โ ุชุญุฏูุซ ุชููุงุฆู ูู 10 ุซูุงูู
  - โ ุฅุดุนุงุฑุงุช ุนูุฏ ุชุบููุฑ ุงูุญุงูุฉ

### 8๏ธโฃ **ุตูุญุฉ ูุญุต ุงููุธุงู** `/system-check`
- **ุงูููู:** `src/app/system-check/page.tsx`
- **ุงููุธุงุฆู:**
  - โ ูุญุต ุงูุงุชุตุงู ุจู Supabase
  - โ ูุญุต ุงูุฌุฏุงูู
  - โ ูุญุต ุงููุตุงุฏูุฉ
  - โ ูุญุต ุงูููุฑุณุงุช

---

## ๐ **ุงูุฌุฏุงูู ุงููุณุชุฎุฏูุฉ**

### ุฌุฏูู `users`
```sql
- id (UUID)
- name (VARCHAR)
- email (VARCHAR)
- phone (VARCHAR)
- password_hash (VARCHAR)
- role (VARCHAR)
- father_name (VARCHAR)
- student_phone (VARCHAR)
- parent_phone (VARCHAR)
- mother_phone (VARCHAR)
- school_name (VARCHAR)
- city (VARCHAR)
- grade_level (VARCHAR)
- guardian_job (VARCHAR)
```

### ุฌุฏูู `courses`
```sql
- id (UUID)
- title (VARCHAR)
- description (TEXT)
- price (DECIMAL)
- instructor_name (VARCHAR)
- is_published (BOOLEAN)
- created_at (TIMESTAMP)
```

### ุฌุฏูู `payment_requests`
```sql
- id (UUID)
- student_name (VARCHAR)
- student_phone (VARCHAR)
- course_id (UUID)
- course_name (VARCHAR)
- status (VARCHAR)
- created_at (TIMESTAMP)
```

### ุฌุฏูู `course_enrollments`
```sql
- id (UUID)
- student_id (UUID)
- course_id (UUID)
- payment_request_id (UUID)
- is_active (BOOLEAN)
- enrolled_at (TIMESTAMP)
```

---

## ๐ **API Routes ุงููุฑุจูุทุฉ**

### `/api/auth/register`
- **ุงููุธููุฉ:** ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
- **ุงูุฌุฏูู:** `users`
- **ุงูุนูููุงุช:** INSERT

### `/api/auth/login`
- **ุงููุธููุฉ:** ุชุณุฌูู ุงูุฏุฎูู
- **ุงูุฌุฏูู:** `users`
- **ุงูุนูููุงุช:** SELECT

### `/api/payment-request`
- **ุงููุธููุฉ:** ุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุฏูุน
- **ุงูุฌุฏุงูู:** `payment_requests`, `course_enrollments`
- **ุงูุนูููุงุช:** GET, POST, PATCH

### `/api/courses`
- **ุงููุธููุฉ:** ุฅุฏุงุฑุฉ ุงูููุฑุณุงุช
- **ุงูุฌุฏูู:** `courses`
- **ุงูุนูููุงุช:** GET, POST, PUT, DELETE

---

## ๐ **ุชุฏูู ุงูุจูุงูุงุช**

```mermaid
graph TD
    A[ุงูุชุณุฌูู] --> B[ุฌุฏูู users]
    B --> C[ุชุณุฌูู ุงูุฏุฎูู]
    C --> D[ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ]
    D --> E[ุตูุญุฉ ุงูููุฑุณุงุช]
    E --> F[ุฌุฏูู courses]
    F --> G[ุตูุญุฉ ุงูููุฑุณ]
    G --> H[ุทูุจ ุฏูุน]
    H --> I[ุฌุฏูู payment_requests]
    I --> J[ููุญุฉ ุงูุฃุฏูู]
    J --> K[ุงูููุงููุฉ]
    K --> L[ุฌุฏูู course_enrollments]
    L --> M[ุชูุนูู ุงูุงุดุชุฑุงู]
```

---

## โจ **ุงููููุฒุงุช ุงูููููุฐุฉ**

1. **ุงูุชุณุฌูู ุงูุฐูู:**
   - ุญูุธ ุฌููุน ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ุชูุฌูู ุชููุงุฆู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
   - ุฑุณุงูุฉ ุชุฑุญูุจ ูุฎุตุตุฉ

2. **ุงูุชูุงูู ุงููุงูู:**
   - ุฌููุน ุงูุตูุญุงุช ูุฑุจูุทุฉ ุจู Supabase
   - ุชุญุฏูุซุงุช ูู ุงูููุช ุงููุนูู
   - ูุฒุงููุฉ ุงูุจูุงูุงุช

3. **ุงูุฃูุงู:**
   - ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
   - JWT Tokens
   - RLS Policies

4. **ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:**
   - ููุก ุงูุจูุงูุงุช ุงูุชููุงุฆู
   - ุฑุณุงุฆู ุชุฑุญูุจ ุฏููุงููููุฉ
   - ุชุญุฏูุซุงุช ููุฑูุฉ

---

## ๐ **ููููุฉ ุงูุงุฎุชุจุงุฑ**

### 1๏ธโฃ **ุชุทุจูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```sql
-- ูู Supabase SQL Editor
-- ููุฐ ุงููููุงุช ุจุงูุชุฑุชูุจ:
1. users_table.sql
2. payment_system_safe.sql
```

### 2๏ธโฃ **ุงุฎุชุจุงุฑ ุงูุชุณุฌูู:**
1. ุงูุชุญ `/register`
2. ุงููุฃ ุงูุจูุงูุงุช ุงููุงููุฉ
3. ุงุถุบุท "ุฅูุดุงุก ุญุณุงุจ"
4. ุณุชูุชูู ุชููุงุฆูุงู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
5. ุณุชุฑู ุฑุณุงูุฉ ุชุฑุญูุจ ุจุงูุจูุงูุงุช

### 3๏ธโฃ **ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
1. ุงูุชุญ Supabase Dashboard
2. ุงุฐูุจ ุฅูู Table Editor
3. ุงูุชุญ ุฌุฏูู `users`
4. ุณุชุฌุฏ ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ ุจูู ุจูุงูุงุชู

---

## โ **ุงูุฎูุงุตุฉ**

**ุฌููุน ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ ูุฑุจูุทุฉ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช:**
- โ ุงูุชุณุฌูู ูุญูุธ ูู `users`
- โ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุชุฌูุจ ูู `courses`
- โ ุตูุญุงุช ุงูููุฑุณุงุช ุชุณุชุฎุฏู Supabase
- โ ูุธุงู ุงูุฏูุน ูุฑุจูุท ุจุงููุงูู
- โ ุงูุจูุงูุงุช ุชูููุฃ ุชููุงุฆูุงู ุจุนุฏ ุงูุชุณุฌูู

---

**ุชู ุจูุงุณุทุฉ:** ูุธุงู Cascade AI  
**ุงูุชุงุฑูุฎ:** 2024-11-09
